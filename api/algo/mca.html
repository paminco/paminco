
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>MCA: Marginal Cost Approximation &#8212; paminco 0.1 documentation</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/blank.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/contentui.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/paminco.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/user_guide.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/api.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/contentui.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="MCAConfig" href="generated/paminco.algo.mca.MCAConfig.html" />
    <link rel="prev" title="EFA.run" href="generated/paminco.algo.efa.EFA.run.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../../index.html">
<p class="title">paminco</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../getting_started.html">
  Getting Started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../user_guide/index.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../index.html">
  API Reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../theory/index.html">
  Theoretical Background
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/paminco/paminco" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   Algorithms
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="efa.html">
     EFA: Electrical Flow Algorithm
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     MCA: Marginal Cost Approximation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="mcfi.html">
     MCFI: Minimum Cost Flow Interpolation
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../net/index.html">
   Network
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../net/network.html">
     Network
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../net/shared.html">
     Shared
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../net/edges.html">
     Edges
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../net/nodes.html">
     Nodes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../net/demand/index.html">
     Demand
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../net/cost/index.html">
     Cost
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../optim/index.html">
   Optimizer
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../optim/fw.html">
     Frank-Wolfe Algorithm
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../optim/fw_net.html">
     Network Frank-Wolfe
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../optim/subproblem.html">
     Subproblem
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../base/index.html">
   Base Classes
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../base/generated/paminco._base.Base.html">
     Base
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../base/generated/paminco._base.Config.html">
     Config
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../base/solution.html">
     ParametricSolution
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../base/solver.html">
     ParametricSolver
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../base/abapprox.html">
     AlphaBetaApproximativeSolver
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../utils.html">
   Utils
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../generated/paminco.utils.misc.Cache.html">
     Cache
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../generated/paminco.utils.misc.callback_to_list.html">
     callback_to_list
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../generated/paminco.utils.typing.IntEnum2.html">
     IntEnum2
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../generated/paminco.utils.typing.is_int.html">
     is_int
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../generated/paminco.utils.typing.is_iterable.html">
     is_iterable
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../generated/paminco.utils.typing.sparse_format.html">
     sparse_format
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../generated/paminco.linalg.SingularLaplaceError.html">
     SingularLaplaceError
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../generated/paminco.linalg.InverseMethod.html">
     InverseMethod
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../generated/paminco.linalg.CholeskyInverse.html">
     CholeskyInverse
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../generated/paminco.linalg.star_inv.html">
     star_inv
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../generated/paminco.linalg.star_update_by_edge.html">
     star_update_by_edge
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../generated/paminco.utils.math.np_divide_a_by_b.html">
     np_divide_a_by_b
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../generated/paminco.utils.math.find_min_col_lex.html">
     find_min_col_lex
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../generated/paminco.utils.bisec.bisec_fast.html">
     bisec_fast
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../generated/paminco.utils.bisec.bisec_method.html">
     bisec_method
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../generated/paminco.utils.readin.parse_polynomial.html">
     parse_polynomial
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../generated/paminco.utils.readin.parse_number.html">
     parse_number
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../generated/paminco.utils.readin.xml_find_root.html">
     xml_find_root
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../generated/paminco.utils.readin.xml_add_element.html">
     xml_add_element
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../generated/paminco.callback.CallBackFlag.html">
     CallBackFlag
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../generated/paminco.callback.SimpleTimer.html">
     SimpleTimer
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../generated/paminco.callback.SimpleDebuggerIterativeModel.html">
     SimpleDebuggerIterativeModel
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../generated/paminco.utils.io.save_object.html">
     save_object
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../generated/paminco.utils.io.load_object.html">
     load_object
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../generated/paminco.utils.io.prettify_xml.html">
     prettify_xml
    </a>
   </li>
  </ul>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#class-description">
   Class Description
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#main-idea">
   Main Idea
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#settings-and-interpolation">
   Settings and Interpolation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#attributes">
   Attributes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#methods">
   Methods
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="mca-marginal-cost-approximation">
<span id="mca"></span><h1>MCA: Marginal Cost Approximation<a class="headerlink" href="#mca-marginal-cost-approximation" title="Permalink to this headline">¶</a></h1>
<section id="class-description">
<h2>Class Description<a class="headerlink" href="#class-description" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="paminco.algo.mca.MCA">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">paminco.algo.mca.</span></span><span class="sig-name descname"><span class="pre">MCA</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">network</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../net/network.html#paminco.net.Network" title="paminco.net.network.Network"><span class="pre">paminco.net.network.Network</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_simple_timer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy_network</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/paminco/algo/mca.html#MCA"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#paminco.algo.mca.MCA" title="Permalink to this definition">¶</a></dt>
<dd><p>Marginal Cost Approximation.</p>
<p>This method interpolates the marginal edge cost and then runs EFA to
compute an exact optimal potential (and thus minimum cost flow) function.
Thus, MCA is an approximate solver, where the approximation error arises
from the spline-interpolation, and is named as marginal cost approximation
(MCA).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>net</strong><span class="classifier">Network</span></dt><dd><p>Network to find parametric min cost flows for.</p>
</dd>
<dt><strong>name</strong><span class="classifier">str, optional</span></dt><dd><p>Name of solver.</p>
</dd>
<dt><strong>callback</strong><span class="classifier">callable, or list of callable, optional</span></dt><dd><p>Callbacks called during initialization and run method. Can be
used for debugging and timing.</p>
</dd>
<dt><strong>use_simple_timer</strong><span class="classifier">bool, default=True</span></dt><dd><p>Whether to time MCA. If <code class="docutils literal notranslate"><span class="pre">True</span></code>, timestamps for intializtion
and every iteration will be saved to attribute <code class="docutils literal notranslate"><span class="pre">timer</span></code>.</p>
</dd>
<dt><strong>kwargs</strong><span class="classifier">keyword arguments, optional</span></dt><dd><p>Further options for MCA, see MCFIConfig.</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="generated/paminco.algo.mca.MCAConfig.html#paminco.algo.mca.MCAConfig" title="paminco.algo.mca.MCAConfig"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MCAConfig</span></code></a></dt><dd><p>Settings for MCA.</p>
</dd>
<dt><a class="reference internal" href="generated/paminco.algo.mca.MCAInterpolationRule.html#paminco.algo.mca.MCAInterpolationRule" title="paminco.algo.mca.MCAInterpolationRule"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MCAInterpolationRule</span></code></a></dt><dd><p>Piecewise linear interpolation of the edge cost.</p>
</dd>
<dt><a class="reference internal" href="efa.html#paminco.algo.efa.EFA" title="paminco.algo.efa.EFA"><code class="xref py py-obj docutils literal notranslate"><span class="pre">paminco.algo.efa.EFA</span></code></a></dt><dd><p>Electrical flow algorithm to be run on modified network with piecewise quadratic cost.</p>
</dd>
</dl>
</div>
<p class="rubric">References</p>
<dl class="citation">
<dt class="label" id="ra2b94f3a9151-1"><span class="brackets">1</span></dt>
<dd><p>Klimm, Max, and P. Warode. “Parametric Computation of Minimum Cost
Flows with Piecewise Quadratic Costs.” Mathematics of Operations
Research (2021). Available 10/25/2021 at <a class="reference external" href="https://www3.math.tu-berlin.de/disco/research/publications/pdf/KlimmWarode2021.pdf">https://www3.math.tu-berlin.de/disco/research/publications/pdf/KlimmWarode2021.pdf</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Compute the <strong>price of anarchy</strong> for Sioux Falls:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">paminco</span>
<span class="n">net</span> <span class="o">=</span> <span class="n">paminco</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">load_sioux</span><span class="p">()</span>
<span class="n">net</span><span class="o">.</span><span class="n">set_demand</span><span class="p">((</span><span class="s2">&quot;7&quot;</span><span class="p">,</span> <span class="s2">&quot;13&quot;</span><span class="p">,</span> <span class="mi">100000</span><span class="p">))</span>
<span class="c1"># ----------------------------------------------------------------</span>
<span class="c1"># Calculate system optimum</span>
<span class="n">mca_so</span> <span class="o">=</span> <span class="n">MCA</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="n">mca_so</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="c1"># ----------------------------------------------------------------</span>
<span class="c1"># Calculate user equilibrium -&gt; integrate costs</span>
<span class="n">net_ue</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="n">net_ue</span><span class="o">.</span><span class="n">integrate_cost</span><span class="p">()</span>
<span class="n">mca_ue</span> <span class="o">=</span> <span class="n">MCA</span><span class="p">(</span><span class="n">net_ue</span><span class="p">)</span>
<span class="n">mca_ue</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="c1"># ----------------------------------------------------------------</span>
<span class="c1"># Calculate price of anarchy (PoA)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">cost_so</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">net</span><span class="o">.</span><span class="n">cost</span><span class="p">(</span><span class="n">mca_so</span><span class="o">.</span><span class="n">flow_at</span><span class="p">(</span><span class="n">p</span><span class="p">))</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">x</span><span class="p">])</span>
<span class="n">cost_ue</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">net</span><span class="o">.</span><span class="n">cost</span><span class="p">(</span><span class="n">mca_ue</span><span class="o">.</span><span class="n">flow_at</span><span class="p">(</span><span class="n">p</span><span class="p">))</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">x</span><span class="p">])</span>
<span class="n">PoA</span> <span class="o">=</span> <span class="n">cost_ue</span> <span class="o">/</span> <span class="n">cost_so</span>
</pre></div>
</div>
<p>Determine edge flow in user equilibrium as a function of demand factor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">paminco</span>
<span class="n">net</span> <span class="o">=</span> <span class="n">paminco</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">load_sioux</span><span class="p">()</span>
<span class="n">net</span><span class="o">.</span><span class="n">integrate_cost</span><span class="p">()</span>
<span class="n">net</span><span class="o">.</span><span class="n">set_demand</span><span class="p">((</span><span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;21&quot;</span><span class="p">,</span> <span class="mi">100000</span><span class="p">))</span>
<span class="n">mca</span> <span class="o">=</span> <span class="n">MCA</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="n">mca</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="n">mca</span><span class="o">.</span><span class="n">plot_flow_on_edge</span><span class="p">(</span><span class="mi">55</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><a class="reference internal" href="generated/paminco.algo.mca.MCA.region.html#paminco.algo.mca.MCA.region" title="paminco.algo.mca.MCA.region"><code class="xref py py-obj docutils literal notranslate"><span class="pre">region</span></code></a></dt><dd><p>ndarray of int: piecewise cost region of edges.</p>
</dd>
<dt><a class="reference internal" href="generated/paminco.algo.mca.MCA.edges.html#paminco.algo.mca.MCA.edges" title="paminco.algo.mca.MCA.edges"><code class="xref py py-obj docutils literal notranslate"><span class="pre">edges</span></code></a></dt><dd><p>Object that keeps track of edge values for current region.</p>
</dd>
<dt><a class="reference internal" href="generated/paminco.algo.mca.MCA.edge_coeffs.html#paminco.algo.mca.MCA.edge_coeffs" title="paminco.algo.mca.MCA.edge_coeffs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">edge_coeffs</span></code></a></dt><dd><p>Edge coefficients for current region.</p>
</dd>
<dt><a class="reference internal" href="generated/paminco.algo.mca.MCA.node_potentials.html#paminco.algo.mca.MCA.node_potentials" title="paminco.algo.mca.MCA.node_potentials"><code class="xref py py-obj docutils literal notranslate"><span class="pre">node_potentials</span></code></a></dt><dd><p>Object that keeps track of node potentials of current region.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="main-idea">
<h2>Main Idea<a class="headerlink" href="#main-idea" title="Permalink to this headline">¶</a></h2>
<p>Instead of computing a solution to the actual problem - i.e., a parametric mincost flow w.r.t. to
the demand factor - the MCA algorithm uses marginal cost <span class="math notranslate nohighlight">\(s_f(x)\)</span> that are a piecewise
linear interpolation of the original marginal costs <span class="math notranslate nohighlight">\(f_e(x)\)</span>. This problem can then be solved
exactly with the <a class="reference internal" href="efa.html#efa"><span class="std std-ref">EFA</span></a> algorithm. This main idea is shown in the following
image, where we follow the orange arrows to calculate a <span class="math notranslate nohighlight">\((\alpha, \beta)\)</span>-approximate minimum
cost flow.</p>
<a class="reference internal image-reference" href="../../_images/mca_idea.png"><img alt="Marginal cost approximation" class="align-center" src="../../_images/mca_idea.png" style="width: 400px;" /></a>
</section>
<section id="settings-and-interpolation">
<h2>Settings and Interpolation<a class="headerlink" href="#settings-and-interpolation" title="Permalink to this headline">¶</a></h2>
<table class="longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/paminco.algo.mca.MCAConfig.html#paminco.algo.mca.MCAConfig" title="paminco.algo.mca.MCAConfig"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MCAConfig</span></code></a>(**kwargs)</p></td>
<td><p>Settings for MCA algorithms.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/paminco.algo.mca.MCAInterpolationRule.html#paminco.algo.mca.MCAInterpolationRule" title="paminco.algo.mca.MCAInterpolationRule"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MCAInterpolationRule</span></code></a>(alpha, beta, m, x_max)</p></td>
<td><p>Breakpoint rule for MCA guaranteeing the <span class="math notranslate nohighlight">\((\alpha, \beta)\)</span>-approximation property.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="attributes">
<h2>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h2>
<table class="longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/paminco.algo.mca.MCA.network.html#paminco.algo.mca.MCA.network" title="paminco.algo.mca.MCA.network"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MCA.network</span></code></a></p></td>
<td><p>Get network obj.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/paminco.algo.mca.MCA.name.html#paminco.algo.mca.MCA.name" title="paminco.algo.mca.MCA.name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MCA.name</span></code></a></p></td>
<td><p>Get name of object.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/paminco.algo.mca.MCA.config.html#paminco.algo.mca.MCA.config" title="paminco.algo.mca.MCA.config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MCA.config</span></code></a></p></td>
<td><p>Get configuration of solver.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/paminco.algo.mca.MCA.i.html#paminco.algo.mca.MCA.i" title="paminco.algo.mca.MCA.i"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MCA.i</span></code></a></p></td>
<td><p>Get current iteration count.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/paminco.algo.mca.MCA.lambda_min.html#paminco.algo.mca.MCA.lambda_min" title="paminco.algo.mca.MCA.lambda_min"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MCA.lambda_min</span></code></a></p></td>
<td><p>Get current lambda_min.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/paminco.algo.mca.MCA.lambda_max.html#paminco.algo.mca.MCA.lambda_max" title="paminco.algo.mca.MCA.lambda_max"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MCA.lambda_max</span></code></a></p></td>
<td><p>Get current lambda_max.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/paminco.algo.mca.MCA.breakflag.html#paminco.algo.mca.MCA.breakflag" title="paminco.algo.mca.MCA.breakflag"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MCA.breakflag</span></code></a></p></td>
<td><p>Get current breakflag value.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/paminco.algo.mca.MCA.region.html#paminco.algo.mca.MCA.region" title="paminco.algo.mca.MCA.region"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MCA.region</span></code></a></p></td>
<td><p>ndarray of int: piecewise cost region of edges.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/paminco.algo.mca.MCA.edges.html#paminco.algo.mca.MCA.edges" title="paminco.algo.mca.MCA.edges"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MCA.edges</span></code></a></p></td>
<td><p>Object that keeps track of edge values for current region.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/paminco.algo.mca.MCA.edge_coeffs.html#paminco.algo.mca.MCA.edge_coeffs" title="paminco.algo.mca.MCA.edge_coeffs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MCA.edge_coeffs</span></code></a></p></td>
<td><p>Edge coefficients for current region.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/paminco.algo.mca.MCA.node_potentials.html#paminco.algo.mca.MCA.node_potentials" title="paminco.algo.mca.MCA.node_potentials"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MCA.node_potentials</span></code></a></p></td>
<td><p>Object that keeps track of node potentials of current region.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/paminco.algo.mca.MCA.param_solution.html#paminco.algo.mca.MCA.param_solution" title="paminco.algo.mca.MCA.param_solution"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MCA.param_solution</span></code></a></p></td>
<td><p>Get ParametricSolution object.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/paminco.algo.mca.MCA.L0.html#paminco.algo.mca.MCA.L0" title="paminco.algo.mca.MCA.L0"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MCA.L0</span></code></a></p></td>
<td><p>spmatrix: Laplacian for initial region.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/paminco.algo.mca.MCA.region_zero.html#paminco.algo.mca.MCA.region_zero" title="paminco.algo.mca.MCA.region_zero"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MCA.region_zero</span></code></a></p></td>
<td><p>ndarray of int: initial region in piecewise cost funcs.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="methods">
<h2>Methods<a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h2>
<table class="longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/paminco.algo.mca.MCA.run.html#paminco.algo.mca.MCA.run" title="paminco.algo.mca.MCA.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MCA.run</span></code></a>([callback])</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</section>
</section>


              </div>
              
              
          </main>
          

      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2021, Per Joachims, Max Klimm, Philipp Warode.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.3.2.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>